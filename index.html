
<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>FizicÄƒ - Legea lui Hooke</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff; 
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid #667eea;
            font-weight: bold;
            font-size: 1.4em;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .simulation-container {
            display: flex;
            flex-direction: row;
            border-bottom: 2px solid #333;
            background: white;
            gap: 0;
            flex: 1;
        }

        .column {
            flex: 1;
            padding: 0;
            display: flex;
            flex-direction: column;
        }

        .column:first-child {
            flex: 1.2;
            background: linear-gradient(to right, #fafafa, #ffffff);
            padding: 20px;
            border-right: 1px solid #e0e0e0;
        }

        .column:last-child { 
            border-right: none;
            flex: 1;
            background: linear-gradient(to right, #ffffff, #fafafa);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .panel {
            border: 2px solid #667eea;
            padding: 12px;
            margin-bottom: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
        }

        .panel.large {
            flex-grow: 0;
        }

        h2 { 
            font-size: 1em; 
            margin: 0 0 10px 0; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 8px 12px; 
            color: white;
            border-radius: 5px;
        }

        .input-group {
            margin-bottom: 10px;
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .input-group label {
            font-weight: 600;
            color: #333;
            font-size: 0.85em;
        }

        input { 
            width: 100%;
            max-width: 110px;
            padding: 6px;
            font-family: inherit;
            border: 2px solid #ddd;
            border-radius: 5px;
            transition: border-color 0.2s;
            font-size: 0.9em;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            cursor: pointer;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            font-family: inherit;
            border-radius: 5px;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        /* Zona resort */
        .spring-area {
            position: relative;
            background: linear-gradient(to bottom, #f0f4ff, #ffffff);
            border: 2px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-top: 30px;
            cursor: grab;
            transition: background 0.3s ease;
            flex-grow: 1;
            min-height: 300px;
        }

        .spring-area:active {
            cursor: grabbing;
            background: linear-gradient(to bottom, #e8eeff, #f5f5ff);
        }

        .spring-svg {
            stroke: #667eea;
            stroke-width: 3;
            fill: none;
            filter: drop-shadow(0 2px 4px rgba(102, 126, 234, 0.2));
        }

        .weight {
            width: 60px;
            height: 50px;
            border: 3px solid #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            transition: box-shadow 0.2s;
        }

        .weight:hover {
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
        }

        .force-display {
            position: absolute;
            font-size: 13px;
            color: #667eea;
            font-weight: bold;
            pointer-events: none;
            background: rgba(255,255,255,0.9);
            padding: 3px 8px;
            border-radius: 4px;
        }

        /* Sectiuna de tabel */
        .results-container {
            display: flex;
            flex-direction: row;
            padding: 20px;
            gap: 20px;
            background: white;
            flex-wrap: wrap;
        }

        .table-wrapper {
            flex: 0 0 auto;
            background: white;
            padding: 12px;
            border: 2px solid #667eea;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
            max-height: 280px;
            overflow-y: auto;
        }

        .table-wrapper h3 {
            margin: 0 0 10px 0;
            font-size: 0.95em;
            color: #667eea;
        }

        .chart-wrapper {
            flex: 1;
            background: white;
            padding: 12px;
            border: 2px solid #667eea;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
            position: relative;
            min-height: 250px;
        }

        .chart-wrapper h3 {
            margin: 0 0 10px 0;
            font-size: 0.95em;
            color: #667eea;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chart-wrapper h3 button {
            padding: 4px 10px;
            font-size: 0.8em;
            margin: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.75em;
        }

        th, td { 
            border: 1px solid #ddd; 
            padding: 5px; 
            text-align: center; 
        }
        
        th { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: #f5f5ff;
        }

        footer {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #aaa;
            margin-top: auto;
            border-top: 3px solid #667eea;
        }

        .info-text {
            color: #667eea;
            font-size: 0.95em;
            margin: 8px 0;
        }

        .info-text b {
            color: #764ba2;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        tr {
            animation: slideIn 0.3s ease;
        }
    </style>
</head>
<body>

<header>
    PROIECT LEGEA LUI HOOKE
</header>

<div class="simulation-container">
    <div class="column">
        <div class="panel large">
            <h2>ðŸ”§ Simulare Legea lui Hooke</h2>
            <p style="color: #667eea; font-size: 0.95em; margin: 0 0 15px 0;"><strong>Introdu 2 valori, calculez a 3-a:</strong></p>
            
            <div class="input-group">
                <label for="mass">Masa (g)</label>
                <input type="number" id="mass" placeholder="ex: 200" oninput="autoCalculate()">
            </div>
            
            <div class="input-group">
                <label for="constant">Constanta k (N/m)</label>
                <input type="number" id="constant" placeholder="ex: 50" oninput="autoCalculate()">
            </div>
            
            <div class="input-group">
                <label for="extension">Alungire Î”L (cm)</label>
                <input type="number" id="extension" placeholder="ex: 10" oninput="autoCalculate()">
            </div>

            <div style="margin-top: 12px; padding: 10px; background: #f0f4ff; border-radius: 8px; border-left: 4px solid #667eea; font-size: 0.9em;">
                <p style="margin: 3px 0; color: #333;"><strong>ForÈ›Äƒ:</strong> <span id="displayForce" style="color: #764ba2; font-weight: bold;">? N</span></p>
                <p style="margin: 3px 0; color: #333;"><strong>Status:</strong> <span id="status" style="color: #667eea; font-weight: bold; font-size: 0.9em;">Introdu 2</span></p>
            </div>
        </div>

        <div class="spring-area" id="spring-area-main">
            <svg class="spring-svg" id="svg-main" width="70" height="100">
                <line id="connection-main" x1="35" y1="100" x2="35" y2="100" stroke="#667eea" stroke-width="2" opacity="0.6"/>
                <path id="path-main" d="" />
            </svg>
            <div id="weight-main" class="weight">m</div>
            <div class="force-display" id="force-text-main"></div>
        </div>
    </div>

    <div class="column">
        <div class="table-wrapper">
            <h3>ðŸ“Š Istoric</h3>
            <table>
                <thead>
                    <tr>
                        <th>m (g)</th>
                        <th>k (N/m)</th>
                        <th>Î”L (cm)</th>
                        <th>F (N)</th>
                    </tr>
                </thead>
                <tbody id="history-table"></tbody>
            </table>
        </div>

        <div class="chart-wrapper">
            <h3>ðŸ“ˆ Grafic F vs Î”L
                <button onclick="resetChart()">RESET</button>
            </h3>
            <canvas id="chartCanvas"></canvas>
        </div>
    </div>
</div>

<footer>
    * proiect realizat pentru lucrarea de laborator | 2026 *
</footer>

<script>
    const g = 9.81;
    let history = [];
    let dragging = null;
    let chart = null;
    let chartData = { forces: [], extensions: [] };

    function drawSpring(pathId, height, svgId = 'svg-main') {
        let h = parseFloat(height);
        if (h > 700) h = 700;
        const topY = 15;
        const loops = Math.max(8, Math.ceil(h / 35));
        const loopHeight = (h - 40) / loops;
        
        let d = `M35,0 Q30,7 35,15`;
        for (let i = 0; i < loops; i++) {
            let x1 = 18;
            let x2 = 52;
            if (i % 2 === 1) [x1, x2] = [x2, x1];
            
            let y = topY + (i * loopHeight);
            let yMid = y + (loopHeight / 2);
            
            d += ` Q${x1},${yMid} ${x2},${y + loopHeight}`;
        }
        d += ` Q30,${h-7} 35,${h}`;
        
        const path = document.getElementById(pathId);
        path.setAttribute('d', d);
        document.getElementById(svgId).setAttribute('height', h);
    }

    function animateWeight(weightId, startTop, endTop, duration = 1000) {
        const weight = document.getElementById(weightId);
        const startTime = Date.now();
        const connectionLine = document.getElementById('connection-main');
        
        function elasticEasing(t) {
            const c5 = (2 * Math.PI) / 4.5;
            return t === 0 ? 0 : t === 1 ? 1 : 
                Math.pow(2, -10 * t) * Math.sin((t - 0.075) * c5) + 1;
        }
        
        function animate() {
            const elapsed = Date.now() - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const easeProgress = elasticEasing(progress);
            
            const currentTop = startTop + (endTop - startTop) * easeProgress;
            weight.style.top = currentTop + "px";
            
            if (connectionLine) {
                connectionLine.setAttribute('y2', currentTop + 25);
            }
            
            if (progress < 1) {
                requestAnimationFrame(animate);
            }
        }
        animate();
    }

    function updateForceDisplay(force, dlCm) {
        const display = document.getElementById('force-text-main');
        const weight = document.getElementById('weight-main');
        
        const topPos = parseFloat(weight.style.top) || (95 + dlCm * 3);
        display.style.top = (topPos - 30) + "px";
        display.style.left = "75px";
        display.innerHTML = `F=${force.toFixed(2)}N`;
    }

    function updateChart() {
        const ctx = document.getElementById('chartCanvas');
        if (!ctx) return;

        const maxX = chartData.extensions.length > 0 ? Math.max(...chartData.extensions) * 1.15 : 15;
        const maxY = chartData.forces.length > 0 ? Math.max(...chartData.forces) * 1.15 : 1;

        if (chart) {
            chart.data.labels = chartData.extensions.map(e => e.toFixed(2));
            chart.data.datasets[0].data = chartData.forces.map((f, i) => ({
                x: chartData.extensions[i],
                y: f
            }));
            chart.options.scales.x.max = maxX;
            chart.options.scales.y.max = maxY;
            chart.update();
        } else {
            chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    labels: chartData.extensions.map(e => e.toFixed(2)),
                    datasets: [{
                        label: 'F vs Î”L',
                        data: chartData.forces.map((f, i) => ({
                            x: chartData.extensions[i],
                            y: f
                        })),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 2,
                        pointRadius: 5,
                        pointHoverRadius: 7,
                        pointBackgroundColor: '#764ba2',
                        pointBorderColor: '#667eea',
                        pointBorderWidth: 1.5,
                        showLine: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: true, position: 'top', labels: { font: { size: 11 }, padding: 10 } }
                    },
                    scales: {
                        x: { 
                            title: { display: true, text: 'Î”L (cm)', font: { size: 10, weight: 'bold' } },
                            min: 0,
                            max: maxX,
                            grid: { color: 'rgba(102, 126, 234, 0.1)' }
                        },
                        y: { 
                            title: { display: true, text: 'ForÈ›Äƒ (N)', font: { size: 10, weight: 'bold' } },
                            min: 0,
                            max: maxY,
                            grid: { color: 'rgba(102, 126, 234, 0.1)' }
                        }
                    }
                }
            });
        }
    }

    function autoCalculate() {
        const mass = parseFloat(document.getElementById('mass').value);
        const constant = parseFloat(document.getElementById('constant').value);
        const extension = parseFloat(document.getElementById('extension').value);
        
        const filledCount = [mass, constant, extension].filter(v => !isNaN(v) && v > 0).length;
        
        if (filledCount < 2) {
            document.getElementById('status').innerText = 'Introdu 2';
            document.getElementById('displayForce').innerText = '? N';
            return;
        }

        let calculatedMass = mass;
        let calculatedConstant = constant;
        let calculatedExtension = extension;

        if (!isNaN(mass) && mass > 0 && !isNaN(constant) && constant > 0) {
            const force = (mass / 1000) * g;
            calculatedExtension = (force / constant) * 100;
            document.getElementById('extension').value = calculatedExtension.toFixed(2);
            document.getElementById('status').innerText = 'Î”L âœ“';
        } else if (!isNaN(mass) && mass > 0 && !isNaN(extension) && extension > 0) {
            const force = (mass / 1000) * g;
            calculatedConstant = force / (extension / 100);
            document.getElementById('constant').value = calculatedConstant.toFixed(2);
            document.getElementById('status').innerText = 'k âœ“';
        } else if (!isNaN(constant) && constant > 0 && !isNaN(extension) && extension > 0) {
            const force = constant * (extension / 100);
            calculatedMass = (force / g) * 1000;
            document.getElementById('mass').value = calculatedMass.toFixed(2);
            document.getElementById('status').innerText = 'm âœ“';
        }

        const finalForce = (calculatedMass / 1000) * g;
        document.getElementById('displayForce').innerText = finalForce.toFixed(2) + ' N';

        const oldHeight = parseFloat(document.getElementById('svg-main').getAttribute('height')) || 95;
        const newHeight = 95 + (calculatedExtension * 3);
        
        drawSpring('path-main', newHeight);
        animateWeight('weight-main', oldHeight, newHeight);
        document.getElementById('weight-main').innerText = calculatedMass.toFixed(0) + 'g';
        updateForceDisplay(finalForce, calculatedExtension);

        addToHistory(calculatedMass, calculatedConstant, calculatedExtension, finalForce);
    }

    function addToHistory(mass, constant, extension, force) {
        history.unshift({ mass, constant, extension, force });
        if (history.length > 15) history.pop();

        const tbody = document.getElementById('history-table');
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${mass.toFixed(1)}</td>
            <td>${constant.toFixed(1)}</td>
            <td>${extension.toFixed(1)}</td>
            <td>${force.toFixed(2)}</td>
        `;
        tbody.insertBefore(row, tbody.firstChild);
        
        if (tbody.children.length > 15) {
            tbody.removeChild(tbody.lastChild);
        }

        // Update chart
        chartData.extensions.push(extension);
        chartData.forces.push(force);
        if (chartData.extensions.length > 15) {
            chartData.extensions.shift();
            chartData.forces.shift();
        }
        updateChart();
    }

    function setupDragMode() {
        const area = document.getElementById('spring-area-main');
        const weight = document.getElementById('weight-main');
        const pathId = 'path-main';

        area.addEventListener('mousedown', (e) => {
            if (e.target === weight || weight.contains(e.target)) {
                dragging = { startY: e.clientY, startTop: parseFloat(weight.style.top) || 95 };
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (!dragging) return;

            let newTop = dragging.startTop + (e.clientY - dragging.startY);
            if (newTop < 95) newTop = 95;
            if (newTop > 800) newTop = 800;

            weight.style.top = newTop + "px";
            
            const dlCm = (newTop - 95) / 3;
            let vHeight = 95 + dlCm * 3;
            drawSpring(pathId, vHeight);

            const k = parseFloat(document.getElementById('constant').value) || 50;
            const m = (k * (dlCm / 100) / g) * 1000;
            const force = (m / 1000) * g;

            document.getElementById('extension').value = dlCm.toFixed(2);
            document.getElementById('mass').value = m.toFixed(2);
            document.getElementById('displayForce').innerText = force.toFixed(2) + ' N';
            updateForceDisplay(force, dlCm);
        });

        document.addEventListener('mouseup', () => {
            dragging = null;
        });
    }

    window.onload = () => {
        drawSpring('path-main', 95);
        setupDragMode();
        updateChart();
    };

    function resetChart() {
        chartData = { forces: [], extensions: [] };
        const tbody = document.getElementById('history-table');
        tbody.innerHTML = '';
        history = [];
        updateChart();
    }
</script>

</body>
</html>

