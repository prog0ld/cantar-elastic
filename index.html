<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>FizicƒÉ - Legea lui Hooke</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff; 
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid #667eea;
            font-weight: bold;
            font-size: 1.4em;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .simulation-container {
            display: flex;
            flex-direction: row;
            border-bottom: 2px solid #333;
            background: white;
            gap: 0;
        }

        .column {
            flex: 1;
            padding: 25px;
            border-right: 1px solid #e0e0e0;
            display: flex;
            flex-direction: column;
            background: linear-gradient(to right, #fafafa, #ffffff);
            transition: background 0.3s ease;
        }

        .column:hover {
            background: linear-gradient(to right, #f5f5f5, #ffffff);
        }

        .column:last-child { border-right: none; }

        .panel {
            border: 2px solid #667eea;
            padding: 15px;
            margin-bottom: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
        }

        h2 { 
            font-size: 1.1em; 
            margin: 0 0 10px 0; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 8px 12px; 
            color: white;
            border-radius: 5px;
        }

        input { 
            width: 80px; 
            margin: 5px 5px 5px 0;
            padding: 8px;
            font-family: inherit;
            border: 2px solid #ddd;
            border-radius: 5px;
            transition: border-color 0.2s;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            cursor: pointer;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            font-family: inherit;
            border-radius: 5px;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        /* Zona resort */
        .spring-area {
            height: 350px;
            position: relative;
            background: linear-gradient(to bottom, #f0f4ff, #ffffff);
            border: 2px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-top: 20px;
            cursor: grab;
            transition: background 0.3s ease;
        }

        .spring-area:active {
            cursor: grabbing;
            background: linear-gradient(to bottom, #e8eeff, #f5f5ff);
        }

        .spring-svg {
            stroke: #667eea;
            stroke-width: 3;
            fill: none;
            filter: drop-shadow(0 2px 4px rgba(102, 126, 234, 0.2));
        }

        .weight {
            width: 50px;
            height: 40px;
            border: 3px solid #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            transition: box-shadow 0.2s;
        }

        .weight:hover {
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
        }

        .force-display {
            position: absolute;
            font-size: 12px;
            color: #667eea;
            font-weight: bold;
            pointer-events: none;
        }

        .force-arrow {
            position: absolute;
            width: 2px;
            background: #f44336;
            opacity: 0.7;
        }

        /* Sectiuna de tabel si grafic */
        .results-container {
            display: flex;
            flex-direction: row;
            padding: 20px;
            gap: 20px;
            background: white;
            flex-wrap: wrap;
        }


        .table-wrapper {
            flex: 1;
            background: white;
            padding: 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
            min-width: 300px;
        }

        .chart-wrapper {
            flex: 1;
            background: white;
            padding: 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
            min-width: 350px;
            position: relative;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85em;
        }

        th, td { 
            border: 1px solid #ddd; 
            padding: 8px; 
            text-align: center; 
        }
        
        th { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: #f5f5ff;
        }

        footer {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #aaa;
            margin-top: auto;
            border-top: 3px solid #667eea;
        }

        .info-text {
            color: #667eea;
            font-size: 0.95em;
            margin: 8px 0;
        }

        .info-text b {
            color: #764ba2;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        tr {
            animation: slideIn 0.3s ease;
        }
    </style>
</head>
<body>

<header>
    PROIECT LEGEA LUI HOOKE
</header>

<div class="simulation-container">
<div class="column">
        <div class="panel">
            <h2>üìê Calcul constantƒÉ k</h2>
            <label>Masa(g): <input type="number" id="m1" value="200"></label>
            <label>ŒîL(cm): <input type="number" id="dl1" value="10"></label>
            <button onclick="runMod1()">CALCULEAZƒÇ</button>
            <p class="info-text">Rezultat: <b>k = <span id="outK">?</span> N/m</b></p>
        </div>
        <div class="spring-area" id="spring-area-1">
            <svg class="spring-svg" id="svg1" width="60" height="100">
                <line id="connection-w1" x1="30" y1="100" x2="30" y2="100" stroke="#667eea" stroke-width="2" opacity="0.6"/>
                <path id="path1" d="" />
            </svg>
            <div id="w1" class="weight">m</div>
            <div class="force-display" id="force-text-1"></div>
        </div>
    </div>

    <div class="column">
        <div class="panel">
            <h2>üîÑ Calcul alungire ŒîL</h2>
            <label>k(N/m): <input type="number" id="k2" value="50"></label>
            <label>Masa(g): <input type="number" id="m2" value="300"></label>
            <button onclick="runMod2()">SIMULEAZƒÇ</button>
            <p class="info-text">Rezultat: <b>ŒîL = <span id="outDL">?</span> cm</b></p>
        </div>
        <div class="spring-area" id="spring-area-2">
            <svg class="spring-svg" id="svg2" width="60" height="100">
                <line id="connection-w2" x1="30" y1="100" x2="30" y2="100" stroke="#667eea" stroke-width="2" opacity="0.6"/>
                <path id="path2" d="" />
            </svg>
            <div id="w2" class="weight">m</div>
            <div class="force-display" id="force-text-2"></div>
        </div>
    </div>
</div>

<div class="results-container">
    <div class="table-wrapper">
        <h3 style="margin-top: 0; color: #667eea;">üìä Istoric Mod 1</h3>
        <table>
            <thead><tr><th>m (g)</th><th>ŒîL (cm)</th><th>k (N/m)</th></tr></thead>
            <tbody id="tab1"></tbody>
        </table>
    </div>
    <div class="table-wrapper">
        <h3 style="margin-top: 0; color: #667eea;">üìä Istoric Mod 2</h3>
        <table>
            <thead><tr><th>k (N/m)</th><th>m (g)</th><th>ŒîL (cm)</th></tr></thead>
            <tbody id="tab2"></tbody>
        </table>
    </div>
    <div class="chart-wrapper">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <h3 style="margin: 0; color: #667eea;">üìà Grafic F vs ŒîL</h3>
            <button onclick="resetChart()" style="padding: 6px 12px; font-size: 0.9em; margin-top: 0;">RESET</button>
        </div>
        <canvas id="chartCanvas"></canvas>
    </div>
</div>

<footer>
    * proiect realizat pentru lucrarea de laborator | 2026 *
</footer>

<script>
    const g = 9.81;
    let chartData = { forces: [], extensions: [] };
    let chart = null;
    let dragging = null;

    function drawSpring(pathId, height) {
        let h = parseFloat(height);
        if (h > 310) h = 310;
        const topY = 10;
        const loops = Math.max(6, Math.ceil(h / 30));
        const loopHeight = (h - 30) / loops;
        
        let d = `M30,0 Q25,5 30,10`;
        for (let i = 0; i < loops; i++) {
            let x1 = 15;
            let x2 = 45;
            if (i % 2 === 1) [x1, x2] = [x2, x1];
            
            let y = topY + (i * loopHeight);
            let yMid = y + (loopHeight / 2);
            
            d += ` Q${x1},${yMid} ${x2},${y + loopHeight}`;
        }
        d += ` Q25,${h-5} 30,${h}`;
        
        const path = document.getElementById(pathId);
        path.setAttribute('d', d);
        path.parentElement.setAttribute('height', h);
    }

    function animateWeight(weightId, startTop, endTop, duration = 1000) {
        const weight = document.getElementById(weightId);
        const startTime = Date.now();
        const connectionLine = document.getElementById('connection-' + weightId);
        
        function elasticEasing(t) {
            // Elastic easing cu bounce
            const c5 = (2 * Math.PI) / 4.5;
            return t === 0 ? 0 : t === 1 ? 1 : 
                Math.pow(2, -10 * t) * Math.sin((t - 0.075) * c5) + 1;
        }
        
        function animate() {
            const elapsed = Date.now() - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const easeProgress = elasticEasing(progress);
            
            const currentTop = startTop + (endTop - startTop) * easeProgress;
            weight.style.top = currentTop + "px";
            
            if (connectionLine) {
                connectionLine.setAttribute('y2', currentTop);
            }
            
            if (progress < 1) {
                requestAnimationFrame(animate);
            }
        }
        animate();
    }

    function updateForceDisplay(mode, force, dlCm) {
        const forceId = mode === 1 ? 'force-text-1' : 'force-text-2';
        const display = document.getElementById(forceId);
        const weight = document.getElementById(mode === 1 ? 'w1' : 'w2');
        
        const topPos = parseFloat(weight.style.top) || (80 + dlCm * 3);
        display.style.top = (topPos - 25) + "px";
        display.style.left = "5px";
        display.innerHTML = `<small>F=${force.toFixed(1)}N</small>`;
    }

    function updateChart() {
        const ctx = document.getElementById('chartCanvas');
        if (!ctx) return;

        const maxX = chartData.extensions.length > 0 ? Math.max(...chartData.extensions) * 1.1 : 10;
        const maxY = chartData.forces.length > 0 ? Math.max(...chartData.forces) * 1.1 : 5;

        if (chart) {
            chart.data.labels = chartData.extensions.map(e => e.toFixed(2));
            chart.data.datasets[0].data = chartData.forces.map((f, i) => ({
                x: chartData.extensions[i],
                y: f
            }));
            chart.options.scales.x.max = maxX;
            chart.options.scales.y.max = maxY;
            chart.update();
        } else {
            chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    labels: chartData.extensions.map(e => e.toFixed(2)),
                    datasets: [{
                        label: 'For»õƒÉ vs Extensie',
                        data: chartData.forces.map((f, i) => ({
                            x: chartData.extensions[i],
                            y: f
                        })),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 3,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        pointBackgroundColor: '#764ba2',
                        pointBorderColor: '#667eea',
                        pointBorderWidth: 2,
                        showLine: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: true, position: 'top', labels: { font: { size: 13 }, padding: 15 } }
                    },
                    scales: {
                        x: { 
                            title: { display: true, text: 'ŒîL (cm)', font: { size: 12, weight: 'bold' } },
                            min: 0,
                            max: maxX,
                            grid: { color: 'rgba(102, 126, 234, 0.1)' }
                        },
                        y: { 
                            title: { display: true, text: 'For»õƒÉ (N)', font: { size: 12, weight: 'bold' } },
                            min: 0,
                            max: maxY,
                            grid: { color: 'rgba(102, 126, 234, 0.1)' }
                        }
                    }
                }
            });
        }
    }

    function runMod1() {
        let m = parseFloat(document.getElementById('m1').value);
        let dl = parseFloat(document.getElementById('dl1').value);
        if(m <= 0 || dl <= 0) return;

        const force = (m/1000) * g;
        let k = force / (dl/100);
        document.getElementById('outK').innerText = k.toFixed(2);
        
        let vHeight = 80 + (dl * 3); 
        const oldHeight = parseFloat(document.getElementById('svg1').getAttribute('height')) || 80;
        
        drawSpring('path1', vHeight);
        animateWeight('w1', oldHeight, vHeight);
        document.getElementById('w1').innerText = m + "g";
        updateForceDisplay(1, force, dl);

        // Actualizare grafic
        chartData.extensions.push(dl);
        chartData.forces.push(force);
        if(chartData.extensions.length > 15) {
            chartData.extensions.shift();
            chartData.forces.shift();
        }
        updateChart();

        addTableRow('tab1', [m, dl.toFixed(2), k.toFixed(2)]);
    }

    function runMod2() {
        let k = parseFloat(document.getElementById('k2').value);
        let m = parseFloat(document.getElementById('m2').value);
        if(k <= 0 || m <= 0) return;

        const force = (m/1000) * g;
        let dlM = force / k;
        let dlCm = dlM * 100;
        document.getElementById('outDL').innerText = dlCm.toFixed(2);

        let vHeight = 80 + (dlCm * 3);
        const oldHeight = parseFloat(document.getElementById('svg2').getAttribute('height')) || 80;
        
        drawSpring('path2', vHeight);
        animateWeight('w2', oldHeight, vHeight);
        document.getElementById('w2').innerText = m + "g";
        updateForceDisplay(2, force, dlCm);

        chartData.extensions.push(dlCm);
        chartData.forces.push(force);
        if(chartData.extensions.length > 15) {
            chartData.extensions.shift();
            chartData.forces.shift();
        }
        updateChart();

        addTableRow('tab2', [k.toFixed(2), m, dlCm.toFixed(2)]);
    }

    function resetChart() {
        chartData = { forces: [], extensions: [] };
        if (chart) {
            chart.data.labels = [];
            chart.data.datasets[0].data = [];
            chart.update();
        }
    }

    function addTableRow(id, values) {
        let tbody = document.getElementById(id);
        let row = tbody.insertRow(0);
        values.forEach(v => {
            const cell = row.insertCell();
            cell.innerText = v;
        });
        if(tbody.rows.length > 10) tbody.deleteRow(10);
    }

    // Drag n drop (cv de genu)
    function setupDragMode(areaId, mode) {
        const area = document.getElementById(areaId);
        const weight = document.getElementById(mode === 1 ? 'w1' : 'w2');
        const pathId = mode === 1 ? 'path1' : 'path2';

        area.addEventListener('mousedown', (e) => {
            if (e.target === weight || weight.contains(e.target)) {
                dragging = { mode, startY: e.clientY, startTop: parseFloat(weight.style.top) || 80 };
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (!dragging || dragging.mode !== mode) return;

            let newTop = dragging.startTop + (e.clientY - dragging.startY);
            if (newTop < 80) newTop = 80;
            if (newTop > 350) newTop = 350;

            weight.style.top = newTop + "px";
            
            // Calcul alungire
            const dlCm = (newTop - 80) / 3;
            
            let vHeight = 80 + dlCm * 3;
            drawSpring(pathId, vHeight);

            // actualizare in timp real (cred)
            if (mode === 1) {
                let m = parseFloat(document.getElementById('m1').value) || 200;
                const force = (m/1000) * g;
                let k = force / (dlCm/100);
                document.getElementById('outDL').innerText = dlCm.toFixed(2);
                document.getElementById('outK').innerText = k.toFixed(2);
                updateForceDisplay(1, force, dlCm);
            } else {
                let k = parseFloat(document.getElementById('k2').value) || 50;
                document.getElementById('m2').value = ((k * dlCm / 100 / g) * 1000).toFixed(0);
                const m = parseFloat(document.getElementById('m2').value);
                const force = (m/1000) * g;
                updateForceDisplay(2, force, dlCm);
            }
        });

        document.addEventListener('mouseup', () => {
            if (dragging && dragging.mode === mode) {
                dragging = null;
            }
        });
    }

    // Init
    window.onload = () => {
        drawSpring('path1', 80);
        drawSpring('path2', 80);
        setupDragMode('spring-area-1', 1);
        setupDragMode('spring-area-2', 2);
        updateChart();
    };
</script>

</body>
</html>

